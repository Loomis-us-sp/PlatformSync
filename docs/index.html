
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>PlatformSync API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#platformsync-push-api" class="toc-h2 toc-link" data-title="platformsync-push-api">PlatformSync Push API</a>
                  </li>
                  <li>
                    <a href="#platformsync-pull-api" class="toc-h2 toc-link" data-title="platformsync-pull-api">PlatformSync Pull API</a>
                  </li>
                  <li>
                    <a href="#transaction-delivery-and-exceptions" class="toc-h2 toc-link" data-title="transaction-delivery-and-exceptions">Transaction Delivery and Exceptions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#push-api" class="toc-h1 toc-link" data-title="push-api">Push API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#setup" class="toc-h2 toc-link" data-title="setup">Setup</a>
                  </li>
                  <li>
                    <a href="#endpoint-urls" class="toc-h2 toc-link" data-title="endpoint-urls">Endpoint URLs</a>
                  </li>
                  <li>
                    <a href="#capacity-planning" class="toc-h2 toc-link" data-title="capacity-planning">Capacity Planning</a>
                  </li>
                  <li>
                    <a href="#security" class="toc-h2 toc-link" data-title="security">Security</a>
                  </li>
                  <li>
                    <a href="#transaction-whitelist" class="toc-h2 toc-link" data-title="transaction-whitelist">Transaction Whitelist</a>
                  </li>
                  <li>
                    <a href="#failure-notifications" class="toc-h2 toc-link" data-title="failure-notifications">Failure Notifications</a>
                  </li>
                  <li>
                    <a href="#message-expiration" class="toc-h2 toc-link" data-title="message-expiration">Message Expiration</a>
                  </li>
                  <li>
                    <a href="#message-delivery-order" class="toc-h2 toc-link" data-title="message-delivery-order">Message Delivery Order</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#transactions" class="toc-h1 toc-link" data-title="transactions">Transactions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#payload" class="toc-h2 toc-link" data-title="payload">Payload</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/Loomis-us-sp/PlatformSync/issues'>Issues</a></li>
            <li><a href='https://github.com/Loomis-us-sp/PlatformSync#loomis-safepoint-platformsync'>Why PlatformSync?</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">code_samples</span><span class="p">:</span><span class="w"> </span><span class="s2">"Will be over here"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Welcome to the Loomis PlatformSync API!</p>

<p>Our API comes in 2 flavors, Push API, and Pull API.</p>
<h2 id='platformsync-push-api'>PlatformSync Push API</h2>
<p>As its name implies, the Push API will push transactions into your endpoints provided by you. The transactions will be sent as soon as they are available and processed by our systems.</p>
<h2 id='platformsync-pull-api'>PlatformSync Pull API</h2>
<p>The Pull API will enable you to connect to our API REST service to query for transactional data.  In the event of a failure, you can also use this service to get data that was missed from the Push API.</p>

<aside class="warning">
<strong>This API is not available at this time.</strong>
</aside>
<h2 id='transaction-delivery-and-exceptions'>Transaction Delivery and Exceptions</h2>
<p>Transactions flow from the safe into our system (the timing of this depends on a number of factors). In most cases, if we have connectivity to the safe and there is no issue with the quality of the data, then the transactions will flow through our system very quickly.</p>

<p>However, there are some exceptions that could impact delivery of transactions.</p>

<p>First, our system performs a series of checks to ensure that the transactions are genuine and trustworthy. If our system determines that there is a potential issue, then processing is halted until our staff can ensure data quality.</p>

<p>Second, we may have problems communicating with your service. In this case, we will attempt to redeliver the messages on an interval for 24 hours. See &quot;Message Expiration&quot; below for additional information. </p>
<h1 id='push-api'>Push API</h1>
<p>The Push API will push certain types of transactions to your supplied endpoints. We will send the transactions as soon as they are available and processed by our system.</p>
<h2 id='setup'>Setup</h2>
<p>To begin the setup process, you must communicate directly with our support staff who will perform the requisite setup on our systems.  Send an email to LoomisSafePointSupport@us.loomis.com to get started.</p>

<p>The following table represents the data that should be sent to Loomis to configure this service.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Required</th>
<th>More info</th>
</tr>
</thead><tbody>
<tr>
<td>Endpoints</td>
<td>Yes</td>
<td>Your service endpoint that will accept the POST payload containing transactions.  Multiple endpoints are supported. <strong>NOTE</strong> all data is sent to all the endpoints you provide.</td>
</tr>
<tr>
<td>Endpoint Type</td>
<td>No</td>
<td>Specifies type of environment (production, test, development, etc). This is an indicator for our staff to know what type of enviroment the endpoint is.</td>
</tr>
<tr>
<td>API Key(s)</td>
<td>Yes</td>
<td>Long-lived bearer token to authenticate with your service.  Should be specified <em>per Endpoint</em>.</td>
</tr>
<tr>
<td>API Key Name</td>
<td>Yes</td>
<td>What key to use when sending the API key in the payload. Defaults to <code>Authorization</code>.</td>
</tr>
<tr>
<td>API Key Placement</td>
<td>Yes</td>
<td>Where to place the API Key/Value pair.  Defaults to <code>header</code>.  Can be one of <code>header</code>, <code>body</code>, <code>query</code> or <code>metadata</code></td>
</tr>
<tr>
<td>Endpoint Metadata</td>
<td>No</td>
<td>Additional payload to send.  Should be key-value pairs.  Keys and values should be strings only.</td>
</tr>
<tr>
<td>Notification Recipients</td>
<td>No</td>
<td>Email addresses to send notifications to in the event of a failure. See &quot;Failure Notifications&quot; below for more information.</td>
</tr>
<tr>
<td>Transaction Whitelist</td>
<td>No</td>
<td>List of transactions that will be sent (See &quot;Transaction Whitelist&quot; below).</td>
</tr>
<tr>
<td>Max Batch Size</td>
<td>No</td>
<td>Maximum number of transactions to send at a time.  Defaults to 1000. Maximum value is 1000.</td>
</tr>
</tbody></table>
<h2 id='endpoint-urls'>Endpoint URLs</h2>
<p>You must provide a minimum of one <em>public</em> endpoint for your data to be sent to. The transactions will be sent as an HTTP POST.  Please note that a copy of all transactions will be sent to all the endpoints that you provide.</p>

<p>Also note that the endpoint must be accessible to the internet without any VPN connection.</p>
<h2 id='capacity-planning'>Capacity Planning</h2>
<p>There may be instances where we are POSTing a large volume of transactions at one time. Your service should be able to handle these bursts of high load.  This can be mitigated by specifying a smaller batch size. However, this will result in more messages.</p>

<p>Loomis will work with you during the setup phase to provide an estimate of the expected load.</p>
<h2 id='security'>Security</h2>
<p>Security should be implemented as a long-lived, unique API token.  We do not support security via OAuth, certificates or username/password.</p>

<p>The token will be passed to your endpoint in the manner you specify (either in the body, query string, or header) with the property name you specify as well.</p>

<p>The provided endpoint(s) must be HTTPS only.</p>
<h2 id='transaction-whitelist'>Transaction Whitelist</h2>
<p>You may choose to receive any combination of the following types of transactions:</p>

<ul>
<li>ValidatedCashIn

<ul>
<li>Cashin performed by the note validator on the safe</li>
</ul></li>
<li>Servicing

<ul>
<li>A pickup by a Loomis courier</li>
</ul></li>
<li>ChangePurchase

<ul>
<li>A request for an amount of change to be delivered and paid for out of the validated cash already dropped</li>
</ul></li>
<li>ManualCashTransaction

<ul>
<li>A manual, non-validated drop</li>
</ul></li>
<li>CoinDispense

<ul>
<li>Coins that were dispensed</li>
</ul></li>
<li>NoteDispense

<ul>
<li>Notes that were dispensed</li>
</ul></li>
<li>TubeRemoved 

<ul>
<li>Tube removed from safe</li>
</ul></li>
<li>TubeLoaded

<ul>
<li>Tube loaded into safe</li>
</ul></li>
<li>EndOfDay

<ul>
<li>End of the accounting period on the safe</li>
</ul></li>
</ul>
<h2 id='failure-notifications'>Failure Notifications</h2>
<p>We will attempt to deliver messages in a timely manner.  If we are unable to reach your service, we will notify the email addresses provided by you of that failure, and will continue to attempt to deliver the messages.</p>
<h2 id='message-expiration'>Message Expiration</h2>
<p>We will attempt to deliver your data on an interval for a period of 24 hours. If, after the 24-hours, we are still unable to deliever the transactions, we will send a second notification, and the messages will expire and not be retried.</p>
<h2 id='message-delivery-order'>Message Delivery Order</h2>
<p>We will deliver the transactions ordered by date in which they occured on the safe. We will make every attempt to deliver the transactions in the order in which they are processed by our system. However, occasionaly, in the even of a failure, these messages may come in out of order. Your service should take this into account when accepting transactions.</p>
<h1 id='transactions'>Transactions</h1><h2 id='payload'>Payload</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"MessageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d603c44-c52c-4c30-9ea3-17d580e1d149"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"Transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"PickupGroupId"</span><span class="p">:</span><span class="w"> </span><span class="mi">232</span><span class="p">,</span><span class="w">
            </span><span class="s2">"SerialNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UT82233"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"RetrievedOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-11T17:29:32.4668424-05:00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"TransactionDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-10T17:39:57.5717919"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"UserName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1UAUOVPITN4"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"TransactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ValidatedCashIn"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">2203.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Denominations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mf">20.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"Register"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REGISTER_3"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ChangePurchaseNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5009188254"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DepositReferenceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"021105"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Transaction Object Properties</strong></p>

<table><thead>
<tr>
<th>Property Name</th>
<th>More Information</th>
</tr>
</thead><tbody>
<tr>
<td>PickupGroupId</td>
<td>Groups transactions to a servicing</td>
</tr>
<tr>
<td>SerialNumber</td>
<td>Serial number of the safe that the transaction occured on</td>
</tr>
<tr>
<td>RetrievedOn</td>
<td>Datetime of when the transaction was retrieved from the safe (Includes GMT Offset)</td>
</tr>
<tr>
<td>TransactionDateTime</td>
<td>Datetime of when the transaction occured on the safe (In local time; will not include GMT offset)</td>
</tr>
<tr>
<td>UserName</td>
<td>Logged in user that performed the transaction</td>
</tr>
<tr>
<td>TransactionType</td>
<td>Type of transaction performed.  Will be one of <code>TransactionType</code>&#39;s outlined below.</td>
</tr>
<tr>
<td>Amount</td>
<td>Total cash value of the transaction (if applicable).</td>
</tr>
<tr>
<td>Denominations</td>
<td>If the transaction was a validated drop or dispense, it will contain a list of bills or coin by denomination.  For more information, see &quot;Denomination Object&quot; table below (if applicable).</td>
</tr>
<tr>
<td>Register</td>
<td>Which register, if any, that was used for the transaction (if properly configured on the safe).</td>
</tr>
<tr>
<td>ChangePurchaseNumber</td>
<td>Change purchase number, if any, that was used for the transaction (if properly configured on the safe).</td>
</tr>
<tr>
<td>DepositReferenceNumber</td>
<td>Deposit Reference Number, if any, that was used for the transaction (if properly configured on the safe).</td>
</tr>
</tbody></table>

<p><strong>Transaction Types</strong></p>

<ul>
<li>ValidatedCashIn</li>
<li>Servicing</li>
<li>ChangePurchase</li>
<li>ManualCashTransaction</li>
<li>CoinDispense</li>
<li>NoteDispense</li>
<li>TubeRemoved</li>
<li>TubeLoaded</li>
<li>EndOfDay</li>
</ul>

<p><strong>Denomination Object</strong></p>

<table><thead>
<tr>
<th>Property Name</th>
<th>More Information</th>
</tr>
</thead><tbody>
<tr>
<td>UnitValue</td>
<td>Value of each bill or coin</td>
</tr>
<tr>
<td>Count</td>
<td>Number of bills or coin</td>
</tr>
<tr>
<td>Currency</td>
<td>Currency of the bill or coin</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
