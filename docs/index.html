
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>PlatformSync API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#platformsync-push-api" class="toc-h2 toc-link" data-title="platformsync-push-api">PlatformSync Push API</a>
                  </li>
                  <li>
                    <a href="#platformsync-pull-api" class="toc-h2 toc-link" data-title="platformsync-pull-api">PlatformSync Pull API</a>
                  </li>
                  <li>
                    <a href="#missing-data" class="toc-h2 toc-link" data-title="missing-data">Missing Data</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#push-api" class="toc-h1 toc-link" data-title="push-api">Push API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#setup" class="toc-h2 toc-link" data-title="setup">Setup</a>
                  </li>
                  <li>
                    <a href="#endpoint-urls" class="toc-h2 toc-link" data-title="endpoint-urls">Endpoint URLs</a>
                  </li>
                  <li>
                    <a href="#security" class="toc-h2 toc-link" data-title="security">Security</a>
                  </li>
                  <li>
                    <a href="#transaction-whitelist" class="toc-h2 toc-link" data-title="transaction-whitelist">Transaction Whitelist</a>
                  </li>
                  <li>
                    <a href="#transaction-triggers" class="toc-h2 toc-link" data-title="transaction-triggers">Transaction Triggers</a>
                  </li>
                  <li>
                    <a href="#failure-notifications" class="toc-h2 toc-link" data-title="failure-notifications">Failure Notifications</a>
                  </li>
                  <li>
                    <a href="#message-expiration" class="toc-h2 toc-link" data-title="message-expiration">Message Expiration</a>
                  </li>
                  <li>
                    <a href="#caveats" class="toc-h2 toc-link" data-title="caveats">Caveats</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#objects" class="toc-h1 toc-link" data-title="objects">Objects</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#request-objects" class="toc-h2 toc-link" data-title="request-objects">Request Objects</a>
                  </li>
                  <li>
                    <a href="#response-objects" class="toc-h2 toc-link" data-title="response-objects">Response Objects</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#transactions" class="toc-h1 toc-link" data-title="transactions">Transactions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#request-for-transactions" class="toc-h2 toc-link" data-title="request-for-transactions">Request for Transactions</a>
                  </li>
                  <li>
                    <a href="#response-for-transactions" class="toc-h2 toc-link" data-title="response-for-transactions">Response for Transactions</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/Loomis-us-sp/PlatformSync/issues'>Issues</a></li>
            <li><a href='https://github.com/Loomis-us-sp/PlatformSync#loomis-safepoint-platformsync'>Why PlatformSync?</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">code_samples</span><span class="p">:</span><span class="w"> </span><span class="s2">"Will be over here"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Welcome to the Loomis PlatformSync API!</p>

<p>Our API comes in 2 flavors, Push API, and Pull API.</p>

<aside class="notice">
<strong>Early Development Warning</strong> Note that this API (and associated documentation) is in VERY early stages of development.  It should be expected that, as long as you see this message, that the API can, and will, change. You have been warned!
</aside>
<h2 id='platformsync-push-api'>PlatformSync Push API</h2>
<p>As its name implies, the Push API will push data into your API via REST endpoints provided by you.  This will enable near-real-time transactional data.</p>
<h2 id='platformsync-pull-api'>PlatformSync Pull API</h2>
<p>The Pull API will enable you to connect to our API REST service to query for transactional data.  In the event of a failure, you can also use this service to get data that was missed from the Push API.</p>
<h2 id='missing-data'>Missing Data</h2>
<p>There may be instances where you would expect data to be coming to you, but it is not there.  In <em>most</em> cases, this is due to a data quality alert that halts processing until someone can take action on the alert.  </p>

<p>In other instances, we may have been unable to deliver messages to your endpoints (in the case that you&#39;re using the Push API).  In these instances, you will want to use the Pull API to fill in the missing information.</p>
<h1 id='push-api'>Push API</h1>
<p>The Push API will push certain types of transactions to your supplied REST endpoints. We will send the transactions as soon as they occur on the safe and are processed by our system.</p>
<h2 id='setup'>Setup</h2>
<p>Right now, the setup for thie service is a manual process.  We have plans to integrate this into Loomis Direct, but at this time, we are not there yet.  To begin the setup process, you must communicate directly with our development teams who will perform the requisite setup on our systems.</p>

<p>The following table represents the data that should be sent to Loomis to configure this service.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Required</th>
<th>More info</th>
</tr>
</thead><tbody>
<tr>
<td>Endpoints</td>
<td>Yes</td>
<td>Your service endpoint that will accept the POST payload containing transactions.  Multiple endpoints supported.</td>
</tr>
<tr>
<td>Endpoint Type</td>
<td>No</td>
<td>Specifies type of environment (production, test, development, etc). Defaults to our service value (PlatformSync in <code>test</code> will default this value to <code>test</code>.)</td>
</tr>
<tr>
<td>API Key(s)</td>
<td>Yes</td>
<td>Long-lived bearer token to authenticate with your service.  Should be specified <em>per Endpoint</em>.</td>
</tr>
<tr>
<td>API Key Property</td>
<td>Yes</td>
<td>What key to use when sending the API key in the payload. Defaults to <code>Authorization</code></td>
</tr>
<tr>
<td>API Key Placement</td>
<td>Yes</td>
<td>Where to place the API Key/Value pair.  Defaults to <code>header</code></td>
</tr>
<tr>
<td>Endpoint Metadata</td>
<td>No</td>
<td>Additional payload to send.  Should be key-value pairs</td>
</tr>
<tr>
<td>Notification Recipients</td>
<td>No</td>
<td>Email addresses to send notifications to in the event of a failure</td>
</tr>
<tr>
<td>Expected Format</td>
<td>No</td>
<td>Only JSON datatypes are supported at this time.</td>
</tr>
<tr>
<td>Transaction Whitelist</td>
<td>No</td>
<td>List of transactions that will be sent (See &quot;Transaction Whitelist&quot; below)</td>
</tr>
<tr>
<td>Transaction Triggers</td>
<td>No</td>
<td>List of transactions that will trigger sending other data.  See &quot;Transaction Triggers&quot; below for more information.</td>
</tr>
<tr>
<td>Max Batch Size</td>
<td>No</td>
<td>Maximum number of transactions to send at a time.  Defaults to 1000</td>
</tr>
<tr>
<td>Default Message TTL</td>
<td>No</td>
<td>Exipration of messages. Defaults to 24 Hours</td>
</tr>
</tbody></table>
<h2 id='endpoint-urls'>Endpoint URLs</h2>
<p>You must provide a minimum of one REST endpoint for your data to be posted to.  The transactions will be sent as an HTTP POST.  Please note that all transactions will be sent to all the URL endpoints that you specify</p>
<h2 id='security'>Security</h2>
<p>Security should be implemented as a long-lived, unique API token.  We do not yet support security via OAuth, certificates or username/password.</p>

<p>The token will be passed to your REST endpoint in the manner you specify (either in the body, query string, or header) with the property name you specify as well.</p>
<h2 id='transaction-whitelist'>Transaction Whitelist</h2>
<p>You may choose to receive any combination of the following types of transactions:</p>

<ul>
<li>Validated Drop = 1</li>
<li>Manual Drop = 2</li>
<li>Change Purchase = 3</li>
<li>End of Day = 4</li>
<li>End of Shift = 5</li>
<li>Servicing = 6</li>
</ul>
<h2 id='transaction-triggers'>Transaction Triggers</h2>
<p>You may choose certain &quot;buffer&quot; points, where transactions are not sent to you until a certain type of transaction occurs.  For example, you may hold validated drops and servicings until an End of Day (EOD) occurs, at which point all transactions that have not yet been sent will be sent along with the EOD transaction.</p>
<h2 id='failure-notifications'>Failure Notifications</h2>
<p>If we are unable to deliever your data after a predefined number of retries, we will notifiy the defined email addresses of the failure.  It will then be your responsiblity to get these failed transactions from the Pull API.</p>
<h2 id='message-expiration'>Message Expiration</h2>
<p>We will attempt to deliver your data on an interval for a period of 24 hours (or whatever your defined TTL is).</p>
<h2 id='caveats'>Caveats</h2>
<p>In the event of a failure, we will do our best to deliver recovered transactions in the same order in which they occured. However, your system should be resilient enough to handle out-of-order transactions.</p>
<h1 id='objects'>Objects</h1><h2 id='request-objects'>Request Objects</h2><h3 id='push-api-request-objects'>Push API Request Objects</h3>
<p>There are no publically exposed endpoints for the Push API, and therefore no request object definitions.  </p>
<h3 id='pull-api-request-objects'>Pull API Request Objects</h3>
<p>The implementation of the Pull API is still pending.  This documentation will be update when that API is defined.</p>
<h2 id='response-objects'>Response Objects</h2>
<p>The Push and Pull APIs will share object definitions (while we are aware that the payload we send in the Push API is not technically a &quot;response&quot;).</p>

<p>Properties with <code>null</code> values will be excluded from the payload.</p>
<h1 id='transactions'>Transactions</h1><h2 id='request-for-transactions'>Request for Transactions</h2>
<p>The Pull API for requesting transactions has not yet been defined.</p>
<h2 id='response-for-transactions'>Response for Transactions</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"Total"</span><span class="p">:</span><span class="w"> </span><span class="mi">5434</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Page"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"PageSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"SerialNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UT01234"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"RetrievedOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-01T13:24:00.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"TransactionDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-01T13:20:00.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"UserName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ROSE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"TransactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CashTransaction"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">240</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Denominations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"UnitValue"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"Register"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Register 1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ChangePurchaseNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ASD1234"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DepositReferenceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JGH2345"</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Response Properties</strong></p>

<table><thead>
<tr>
<th>Property Name</th>
<th>More Information</th>
</tr>
</thead><tbody>
<tr>
<td>Total</td>
<td>Total number of transactions included in this (and possibly subsequent) page(s)</td>
</tr>
<tr>
<td>Page</td>
<td>The current page (zero-based index)</td>
</tr>
<tr>
<td>PageSize</td>
<td>The number of transaction included in this page (for the Push API, corresponds to the <code>MaxBatchSize</code> definition)</td>
</tr>
<tr>
<td>Transactions</td>
<td>Transaction Object list</td>
</tr>
</tbody></table>

<p><strong>Transaction Object</strong></p>

<table><thead>
<tr>
<th>Property Name</th>
<th>More Information</th>
</tr>
</thead><tbody>
<tr>
<td>SerialNumber</td>
<td>Serial number of the safe that the transaction occured on</td>
</tr>
<tr>
<td>RetrievedOn</td>
<td>Datetime of when the transaction was retrieved from the safe (In CST/CDT)</td>
</tr>
<tr>
<td>TransactionDateTime</td>
<td>Datetime of when the transaction occured on the safe (In local time)</td>
</tr>
<tr>
<td>UserName</td>
<td>Logged in user that performed the transaction</td>
</tr>
<tr>
<td>TransactionType</td>
<td>Type of transaction performed.  Will be one of <code>TransactionType</code>&#39;s outlined below.</td>
</tr>
<tr>
<td>Amount</td>
<td>Total cash value of the transaction</td>
</tr>
<tr>
<td>Denominations</td>
<td>If the transaction was a validated drop, it will contain a list of bills.  For more information, see &quot;Denomination Object&quot; table below.</td>
</tr>
<tr>
<td>Register</td>
<td>Which register, if any, that was used for the transaction</td>
</tr>
<tr>
<td>ChangePurchaseNumber</td>
<td>Change purchase number, if any, that was used for the transaction</td>
</tr>
<tr>
<td>DepositReferenceNumber</td>
<td>Deposit Reference Number, if any, that was used for the transaction</td>
</tr>
</tbody></table>

<p><strong>Transaction Types</strong></p>

<ul>
<li>Validated Drop = 1</li>
<li>Manual Drop = 2</li>
<li>Change Purchase = 3</li>
<li>End of Day = 4</li>
<li>End of Shift = 5</li>
<li>Servicing = 6</li>
</ul>

<p><strong>Denomination Object</strong></p>

<table><thead>
<tr>
<th>Property Name</th>
<th>More Information</th>
</tr>
</thead><tbody>
<tr>
<td>UnitValue</td>
<td>Value of each bill</td>
</tr>
<tr>
<td>Count</td>
<td>Number of bills</td>
</tr>
<tr>
<td>Currency</td>
<td>Currency of the bill</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
